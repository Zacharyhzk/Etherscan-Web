{"ast":null,"code":"import _classCallCheck from \"/Users/huangzhongkai/Desktop/ntu msis/Semester 2/Blockchain System Software Engineering/FrontendAssessment/Etherscan-Web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/huangzhongkai/Desktop/ntu msis/Semester 2/Blockchain System Software Engineering/FrontendAssessment/Etherscan-Web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/huangzhongkai/Desktop/ntu msis/Semester 2/Blockchain System Software Engineering/FrontendAssessment/Etherscan-Web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/huangzhongkai/Desktop/ntu msis/Semester 2/Blockchain System Software Engineering/FrontendAssessment/Etherscan-Web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/huangzhongkai/Desktop/ntu msis/Semester 2/Blockchain System Software Engineering/FrontendAssessment/Etherscan-Web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/huangzhongkai/Desktop/ntu msis/Semester 2/Blockchain System Software Engineering/FrontendAssessment/Etherscan-Web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/huangzhongkai/Desktop/ntu msis/Semester 2/Blockchain System Software Engineering/FrontendAssessment/Etherscan-Web/src/components/home/home_feed_card.js\";\nimport React from 'react';\nimport { Card, Button, CardHeader, CardBody, CardFooter, Spinner } from 'reactstrap';\nimport { range } from '../../util/web3_util';\nimport BlockItem from './block_item';\nimport TransactionItem from './transaction_item';\nimport { itemAgeToString, timeDiff } from '../../util/general_util';\n\nvar HomeFeedCard =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(HomeFeedCard, _React$Component);\n\n  function HomeFeedCard(props) {\n    var _this;\n\n    _classCallCheck(this, HomeFeedCard);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(HomeFeedCard).call(this, props));\n    _this.state = {\n      intervalID: 0,\n      count: 0\n    };\n    _this.setState = _this.setState.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(HomeFeedCard, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (this.props.feedType === 'Blocks') {\n        this.props.fetchAddressTypeTags();\n      }\n\n      var intervalID = setInterval(function () {\n        _this2.setState({\n          count: _this2.state.count + 1\n        });\n      }, 1 * 1000);\n      this.setState({\n        intervalID: intervalID\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.state.intervalID);\n    }\n  }, {\n    key: \"mapItems\",\n    value: function mapItems() {\n      var _this$props = this.props,\n          items = _this$props.items,\n          addressTypeTags = _this$props.addressTypeTags;\n      return items.map(function (item, idx) {\n        // if its the last block in the array we just need to estimate mine time\n        var mineTime = idx === items.length - 1 ? '~15' : timeDiff(items[idx], items[idx + 1]);\n        var minerTag = addressTypeTags[item.miner] ? addressTypeTags[item.miner] : '';\n        var age = itemAgeToString(item);\n        return React.createElement(BlockItem, {\n          block: item,\n          key: item.hash,\n          age: age,\n          mineTime: mineTime,\n          reward: item.reward.slice(0, 7),\n          minerTag: minerTag,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        });\n      });\n    } // only does 11 of the most recent transactions\n\n  }, {\n    key: \"mapTransactions\",\n    value: function mapTransactions() {\n      var _this$props2 = this.props,\n          blocks = _this$props2.blocks,\n          transactions = _this$props2.transactions;\n      var latestTxs = [];\n      var block = blocks[0];\n      var age = itemAgeToString(block);\n      var loop_len = block.transactions.length >= 10 ? 10 : block;\n      range(0, loop_len).forEach(function (i) {\n        var txHash = block.transactions[i];\n        var tx = transactions[txHash];\n        latestTxs.push(React.createElement(TransactionItem, {\n          tx: tx,\n          age: age,\n          key: txHash,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }));\n      });\n      return latestTxs;\n    }\n  }, {\n    key: \"blockComponents\",\n    value: function blockComponents() {\n      var items = this.props.items;\n\n      if (items === null || items.length < 1) {\n        return '';\n      }\n\n      return this.mapItems();\n    }\n  }, {\n    key: \"transactionComponents\",\n    value: function transactionComponents() {\n      var blocks = this.props.blocks;\n\n      if (blocks === null || blocks.length < 1) {\n        return '';\n      }\n\n      return this.mapTransactions();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var feedType = this.props.feedType;\n      return React.createElement(Card, {\n        className: \"h-100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        tag: \"h3\",\n        className: \"card-header-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Latest \", feedType), React.createElement(CardBody, {\n        className: \"card-scroll-holder\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"scroll-items-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, this.props.items || this.props.blocks ? '' : React.createElement(Spinner, {\n        color: \"dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }), feedType === 'Blocks' ? this.blockComponents() : this.transactionComponents()))), React.createElement(CardFooter, {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Button, {\n        tag: \"a\",\n        className: \"feed-footer-btn w-100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"View all \", feedType.toLowerCase())));\n    }\n  }]);\n\n  return HomeFeedCard;\n}(React.Component);\n\nexport { HomeFeedCard as default };","map":{"version":3,"sources":["/Users/huangzhongkai/Desktop/ntu msis/Semester 2/Blockchain System Software Engineering/FrontendAssessment/Etherscan-Web/src/components/home/home_feed_card.js"],"names":["React","Card","Button","CardHeader","CardBody","CardFooter","Spinner","range","BlockItem","TransactionItem","itemAgeToString","timeDiff","HomeFeedCard","props","state","intervalID","count","setState","bind","feedType","fetchAddressTypeTags","setInterval","clearInterval","items","addressTypeTags","map","item","idx","mineTime","length","minerTag","miner","age","hash","reward","slice","blocks","transactions","latestTxs","block","loop_len","forEach","i","txHash","tx","push","mapItems","mapTransactions","blockComponents","transactionComponents","toLowerCase","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  Card,\n  Button,\n  CardHeader,\n  CardBody,\n  CardFooter,\n  Spinner,\n} from 'reactstrap';\n\n\nimport { range } from '../../util/web3_util'\nimport BlockItem from './block_item'\nimport TransactionItem from './transaction_item'\nimport {\n  itemAgeToString,\n  timeDiff\n} from '../../util/general_util'\n\nexport default class HomeFeedCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      intervalID: 0,\n      count: 0,\n    }\n    this.setState = this.setState.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.feedType === 'Blocks') {\n      this.props.fetchAddressTypeTags();\n    }\n    const intervalID = setInterval(() => {\n      this.setState({\n        count: this.state.count + 1\n      })\n    }, 1 * 1000)\n\n    this.setState({ intervalID });\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.state.intervalID)\n  }\n\n  mapItems() {\n    const { items, addressTypeTags } = this.props;\n    return items.map((item, idx) => {\n      // if its the last block in the array we just need to estimate mine time\n      const mineTime = idx === items.length - 1 ? ('~15')\n        : (timeDiff(items[idx], items[idx + 1]));\n\n      const minerTag = addressTypeTags[item.miner] ?\n        addressTypeTags[item.miner] : ''\n\n      const age = itemAgeToString(item);\n      return (<BlockItem\n        block={item}\n        key={item.hash}\n        age={age}\n        mineTime={mineTime}\n        reward={item.reward.slice(0, 7)}\n        minerTag={minerTag}\n      />)\n    });\n  }\n\n  // only does 11 of the most recent transactions\n  mapTransactions() {\n    const { blocks, transactions } = this.props;\n    let latestTxs = []\n    const block = blocks[0]\n    const age = itemAgeToString(block);\n    const loop_len = block.transactions.length >= 10 ? 10 : block\n    range(0, loop_len).forEach((i) => {\n      const txHash = block.transactions[i];\n      const tx = transactions[txHash];\n      latestTxs.push(< TransactionItem tx={tx} age={age} key={txHash} />);\n    })\n    return latestTxs;\n  }\n\n  blockComponents() { \n    const { items } = this.props;\n    if (items === null || items.length < 1) { return '' }\n    return this.mapItems()\n  }\n\n  transactionComponents() {\n    const { blocks } = this.props;\n    if (blocks === null || blocks.length < 1) { return '' }\n    return this.mapTransactions()\n  }\n\n  render() {\n    const { feedType } = this.props\n    return (\n      <Card className='h-100'>\n        <CardHeader tag=\"h3\" className='card-header-title'>\n          Latest {feedType}\n        </CardHeader>\n        <CardBody className='card-scroll-holder'>\n          <div className=''>\n            <div className='scroll-items-container'>\n              {this.props.items || this.props.blocks ? '' : <Spinner color='dark' />}\n              {feedType === 'Blocks' ? this.blockComponents()\n                : this.transactionComponents()}\n\n            </div>\n          </div>\n        </CardBody>\n        <CardFooter className=\"\">\n          <Button tag='a' className='feed-footer-btn w-100'>\n            View all {feedType.toLowerCase()}\n          </Button>\n        </CardFooter>\n      </Card>\n    )\n  }\n}\n\n"]},"metadata":{},"sourceType":"module"}